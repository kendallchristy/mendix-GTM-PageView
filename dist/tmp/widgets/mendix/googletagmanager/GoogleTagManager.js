define(["exports","react"],(function(e,t){"use strict";var a={};Object.defineProperty(a,"__esModule",{value:!0});a.default=function(e){console.warn("[react-gtm]",e)};var n,i=(n=a)&&n.__esModule?n:{default:n};var r=function(e){return e&&e.__esModule?e:{default:e}}({tags:function(e){var t=e.id,a=e.events,n=e.dataLayer,r=e.dataLayerName,o=e.preview,d="&gtm_auth="+e.auth,s="&gtm_preview="+o;return t||(0,i.default)("GTM Id is required"),{iframe:'\n      <iframe src="https://www.googletagmanager.com/ns.html?id='+t+d+s+'&gtm_cookies_win=x"\n        height="0" width="0" style="display:none;visibility:hidden" id="tag-manager"></iframe>',script:"\n      (function(w,d,s,l,i){w[l]=w[l]||[];\n        w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js', "+JSON.stringify(a).slice(1,-1)+"});\n        var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';\n        j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl+'"+d+s+"&gtm_cookies_win=x';\n        f.parentNode.insertBefore(j,f);\n      })(window,document,'script','"+r+"','"+t+"');",dataLayerVar:this.dataLayer(n,r)}},dataLayer:function(e,t){return"\n      window."+t+" = window."+t+" || [];\n      window."+t+".push("+JSON.stringify(e)+")"}});var o=function(e){return e&&e.__esModule?e:{default:e}}({dataScript:function(e){var t=document.createElement("script");return t.innerHTML=e,t},gtm:function(e){var t=r.default.tags(e);return{noScript:function(){var e=document.createElement("noscript");return e.innerHTML=t.iframe,e},script:function(){var e=document.createElement("script");return e.innerHTML=t.script,e},dataScript:this.dataScript(t.dataLayerVar)}},initialize:function(e){var t=e.gtmId,a=e.events,n=void 0===a?{}:a,i=e.dataLayer,r=e.dataLayerName,o=void 0===r?"dataLayer":r,d=e.auth,s=void 0===d?"":d,u=e.preview,l=void 0===u?"":u,c=this.gtm({id:t,events:n,dataLayer:i||void 0,dataLayerName:o,auth:s,preview:l});i&&document.head.appendChild(c.dataScript),document.head.insertBefore(c.script(),document.head.childNodes[0]),document.body.insertBefore(c.noScript(),document.body.childNodes[0])},dataLayer:function(e){var t=e.dataLayer,a=e.dataLayerName,n=void 0===a?"dataLayer":a;if(window[n])return window[n].push(t);var i=r.default.dataLayer(t,n),o=this.dataScript(i);document.head.insertBefore(o,document.head.childNodes[0])}});var d=o.default;const s=e=>(t.useEffect((()=>{if(!mx.ga4Connected){let t=!1;for(const a of e.additionalProps)"available"!==a.propDataSource.status&&(t=!0);if(!t){const t=mx.ui.getContentForm().onNavigation;mx.ui.getContentForm().onNavigation=()=>{if(!1===e.sendCustomProps){const t={gtmId:e.measurementID};d.initialize(t)}else{const t=()=>{var t,a,n,i,r='{"event":"'+e.pageViewEventName+'",';if(e.sendPageTitle&&(r+='"Page Name":"'+mx.ui.getContentForm().title+'",'),e.sendModuleLocation){var o=mx.ui.getContentForm().path;r+='"Module Location":"'+((t=o).substr(0,t.length-".page.xml".length)+'",')}if(e.sendPageURL){var d;d=null!==mx.ui.getContentForm().url?window.location.origin+mx.ui.getContentForm().url:window.location.origin;r+='"Page URL":"'+(n=(a=d).lastIndexOf("/"),i=a.substring(n+1,a.length),(isNaN(i)?a:a.substr(0,n))+'",')}if(e.sendSessionID&&(r+='"Session ID":"'+mx.session.getSessionObjectId()+'",'),e.sendAdditionalProps){let t="";for(const a of e.additionalProps){for(const e of a.propDataSource.items)t+=a.propValue.get(e).value+", ";t=t.replace(/,\s*$/,""),r+='"'+a.propName+'":"'+t+'",',t=""}}return r=r.replace(/,\s*$/,""),r+="}",JSON.parse(r)},a=t(),n={gtmId:e.measurementID,dataLayer:a};d.initialize(n)}return mx.ga4Connected=!0,t(),null}}}})),null);e.GoogleTagManager=function(e){let{measurementID:a,sendCustomProps:n,pageViewEventName:i,sendPageTitle:r,sendModuleLocation:o,sendPageURL:d,sendSessionID:u,sendAdditionalProps:l,additionalProps:c}=e;return t.createElement(s,{measurementID:a,sendCustomProps:n,pageViewEventName:i,sendPageTitle:r,sendModuleLocation:o,sendPageURL:d,sendSessionID:u,sendAdditionalProps:l,additionalProps:c})},Object.defineProperty(e,"__esModule",{value:!0})}));

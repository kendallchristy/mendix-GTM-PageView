import{useEffect as e,createElement as t}from"react";var a={};Object.defineProperty(a,"__esModule",{value:!0});a.default=function(e){console.warn("[react-gtm]",e)};var n,i=(n=a)&&n.__esModule?n:{default:n};var r=function(e){return e&&e.__esModule?e:{default:e}}({tags:function(e){var t=e.id,a=e.events,n=e.dataLayer,r=e.dataLayerName,o=e.preview,d="&gtm_auth="+e.auth,s="&gtm_preview="+o;return t||(0,i.default)("GTM Id is required"),{iframe:'\n      <iframe src="https://www.googletagmanager.com/ns.html?id='+t+d+s+'&gtm_cookies_win=x"\n        height="0" width="0" style="display:none;visibility:hidden" id="tag-manager"></iframe>',script:"\n      (function(w,d,s,l,i){w[l]=w[l]||[];\n        w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js', "+JSON.stringify(a).slice(1,-1)+"});\n        var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';\n        j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl+'"+d+s+"&gtm_cookies_win=x';\n        f.parentNode.insertBefore(j,f);\n      })(window,document,'script','"+r+"','"+t+"');",dataLayerVar:this.dataLayer(n,r)}},dataLayer:function(e,t){return"\n      window."+t+" = window."+t+" || [];\n      window."+t+".push("+JSON.stringify(e)+")"}});var o=function(e){return e&&e.__esModule?e:{default:e}}({dataScript:function(e){var t=document.createElement("script");return t.innerHTML=e,t},gtm:function(e){var t=r.default.tags(e);return{noScript:function(){var e=document.createElement("noscript");return e.innerHTML=t.iframe,e},script:function(){var e=document.createElement("script");return e.innerHTML=t.script,e},dataScript:this.dataScript(t.dataLayerVar)}},initialize:function(e){var t=e.gtmId,a=e.events,n=void 0===a?{}:a,i=e.dataLayer,r=e.dataLayerName,o=void 0===r?"dataLayer":r,d=e.auth,s=void 0===d?"":d,u=e.preview,l=void 0===u?"":u,m=this.gtm({id:t,events:n,dataLayer:i||void 0,dataLayerName:o,auth:s,preview:l});i&&document.head.appendChild(m.dataScript),document.head.insertBefore(m.script(),document.head.childNodes[0]),document.body.insertBefore(m.noScript(),document.body.childNodes[0])},dataLayer:function(e){var t=e.dataLayer,a=e.dataLayerName,n=void 0===a?"dataLayer":a;if(window[n])return window[n].push(t);var i=r.default.dataLayer(t,n),o=this.dataScript(i);document.head.insertBefore(o,document.head.childNodes[0])}});var d=o.default;const s=t=>(e((()=>{if(!mx.ga4Connected){let e=!1;for(const a of t.additionalProps)"available"!==a.propDataSource.status&&(e=!0);if(!e){const e=mx.ui.getContentForm().onNavigation;mx.ui.getContentForm().onNavigation=()=>{if(!1===t.sendCustomProps){const e={gtmId:t.measurementID};d.initialize(e)}else{const e=()=>{var e,a,n,i,r='{"event":"'+t.pageViewEventName+'",';if(t.sendPageTitle&&(r+='"Page Name":"'+mx.ui.getContentForm().title+'",'),t.sendModuleLocation){var o=mx.ui.getContentForm().path;r+='"Module Location":"'+((e=o).substr(0,e.length-".page.xml".length)+'",')}if(t.sendPageURL){var d;d=null!==mx.ui.getContentForm().url?window.location.origin+mx.ui.getContentForm().url:window.location.origin;r+='"Page URL":"'+(n=(a=d).lastIndexOf("/"),i=a.substring(n+1,a.length),(isNaN(i)?a:a.substr(0,n))+'",')}if(t.sendSessionID&&(r+='"Session ID":"'+mx.session.getSessionObjectId()+'",'),t.sendAdditionalProps){let e="";for(const a of t.additionalProps){for(const t of a.propDataSource.items)e+=a.propValue.get(t).value+", ";e=e.replace(/,\s*$/,""),r+='"'+a.propName+'":"'+e+'",',e=""}}return r=r.replace(/,\s*$/,""),r+="}",JSON.parse(r)},a=e(),n={gtmId:t.measurementID,dataLayer:a};d.initialize(n)}return mx.ga4Connected=!0,e(),null}}}})),null);function u(e){let{measurementID:a,sendCustomProps:n,pageViewEventName:i,sendPageTitle:r,sendModuleLocation:o,sendPageURL:d,sendSessionID:u,sendAdditionalProps:l,additionalProps:m}=e;return t(s,{measurementID:a,sendCustomProps:n,pageViewEventName:i,sendPageTitle:r,sendModuleLocation:o,sendPageURL:d,sendSessionID:u,sendAdditionalProps:l,additionalProps:m})}export{u as GoogleTagManager};

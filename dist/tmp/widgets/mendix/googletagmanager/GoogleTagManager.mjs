import { useEffect, createElement } from 'react';

var warn$1 = {};

Object.defineProperty(warn$1, "__esModule", {
  value: true
});

var warn = function warn(s) {
  console.warn('[react-gtm]', s);
};

warn$1.default = warn;

var _warn = warn$1;

var _warn2 = _interopRequireDefault$2(_warn);

function _interopRequireDefault$2(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
} // https://developers.google.com/tag-manager/quickstart


var Snippets = {
  tags: function tags(_ref) {
    var id = _ref.id,
        events = _ref.events,
        dataLayer = _ref.dataLayer,
        dataLayerName = _ref.dataLayerName,
        preview = _ref.preview,
        auth = _ref.auth;
    var gtm_auth = '&gtm_auth=' + auth;
    var gtm_preview = '&gtm_preview=' + preview;
    if (!id) (0, _warn2.default)('GTM Id is required');
    var iframe = '\n      <iframe src="https://www.googletagmanager.com/ns.html?id=' + id + gtm_auth + gtm_preview + '&gtm_cookies_win=x"\n        height="0" width="0" style="display:none;visibility:hidden" id="tag-manager"></iframe>';
    var script = '\n      (function(w,d,s,l,i){w[l]=w[l]||[];\n        w[l].push({\'gtm.start\': new Date().getTime(),event:\'gtm.js\', ' + JSON.stringify(events).slice(1, -1) + '});\n        var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!=\'dataLayer\'?\'&l=\'+l:\'\';\n        j.async=true;j.src=\'https://www.googletagmanager.com/gtm.js?id=\'+i+dl+\'' + gtm_auth + gtm_preview + '&gtm_cookies_win=x\';\n        f.parentNode.insertBefore(j,f);\n      })(window,document,\'script\',\'' + dataLayerName + '\',\'' + id + '\');';
    var dataLayerVar = this.dataLayer(dataLayer, dataLayerName);
    return {
      iframe: iframe,
      script: script,
      dataLayerVar: dataLayerVar
    };
  },
  dataLayer: function dataLayer(_dataLayer, dataLayerName) {
    return '\n      window.' + dataLayerName + ' = window.' + dataLayerName + ' || [];\n      window.' + dataLayerName + '.push(' + JSON.stringify(_dataLayer) + ')';
  }
};
var Snippets_1 = Snippets;

var _Snippets = Snippets_1;

var _Snippets2 = _interopRequireDefault$1(_Snippets);

function _interopRequireDefault$1(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

var TagManager = {
  dataScript: function dataScript(dataLayer) {
    var script = document.createElement('script');
    script.innerHTML = dataLayer;
    return script;
  },
  gtm: function gtm(args) {
    var snippets = _Snippets2.default.tags(args);

    var noScript = function noScript() {
      var noscript = document.createElement('noscript');
      noscript.innerHTML = snippets.iframe;
      return noscript;
    };

    var script = function script() {
      var script = document.createElement('script');
      script.innerHTML = snippets.script;
      return script;
    };

    var dataScript = this.dataScript(snippets.dataLayerVar);
    return {
      noScript: noScript,
      script: script,
      dataScript: dataScript
    };
  },
  initialize: function initialize(_ref) {
    var gtmId = _ref.gtmId,
        _ref$events = _ref.events,
        events = _ref$events === undefined ? {} : _ref$events,
        dataLayer = _ref.dataLayer,
        _ref$dataLayerName = _ref.dataLayerName,
        dataLayerName = _ref$dataLayerName === undefined ? 'dataLayer' : _ref$dataLayerName,
        _ref$auth = _ref.auth,
        auth = _ref$auth === undefined ? '' : _ref$auth,
        _ref$preview = _ref.preview,
        preview = _ref$preview === undefined ? '' : _ref$preview;
    var gtm = this.gtm({
      id: gtmId,
      events: events,
      dataLayer: dataLayer || undefined,
      dataLayerName: dataLayerName,
      auth: auth,
      preview: preview
    });
    if (dataLayer) document.head.appendChild(gtm.dataScript);
    document.head.insertBefore(gtm.script(), document.head.childNodes[0]);
    document.body.insertBefore(gtm.noScript(), document.body.childNodes[0]);
  },
  dataLayer: function dataLayer(_ref2) {
    var _dataLayer = _ref2.dataLayer,
        _ref2$dataLayerName = _ref2.dataLayerName,
        dataLayerName = _ref2$dataLayerName === undefined ? 'dataLayer' : _ref2$dataLayerName;
    if (window[dataLayerName]) return window[dataLayerName].push(_dataLayer);

    var snippets = _Snippets2.default.dataLayer(_dataLayer, dataLayerName);

    var dataScript = this.dataScript(snippets);
    document.head.insertBefore(dataScript, document.head.childNodes[0]);
  }
};
var TagManager_1 = TagManager;

var _TagManager = TagManager_1;

var _TagManager2 = _interopRequireDefault(_TagManager);

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

var dist = _TagManager2.default;

const InitializeGTM = props => {
  useEffect(() => {
    if (!mx.ga4Connected) {
      // we need the flag because onNavigation is called several times for things like after widget load, after show page, etc. If we remove the flag, then we send more than one page hit per page viewing
      const origOnNavigation = mx.ui.getContentForm().onNavigation; // cache what the original function did

      mx.ui.getContentForm().onNavigation = () => {
        // Complete custom actions
        debugger;

        if (props.sendCustomProps === false) {
          // onNavigation, flag goes in mx.<something>
          const tagManagerArgsInitialize = {
            gtmId: props.measurementID
          };
          dist.initialize(tagManagerArgsInitialize);
        } else {
          //
          let dataLayerStructure = function (props) {
            var dataLayer = '{"event":"' + props.pageViewEventName + '",';

            if (props.sendPageTitle) {
              dataLayer += '"Page Name":"' + mx.ui.getContentForm().title + '",';
            }

            if (props.sendModuleLocation) {
              var modulePath = mx.ui.getContentForm().path;

              var moduleLocation = function (modulePath) {
                var pageExtension = ".page.xml";
                var path = modulePath.substr(0, modulePath.length - pageExtension.length);
                return path;
              }(modulePath);

              dataLayer += '"Module Location":"' + moduleLocation + '",';
            }

            if (props.sendPageURL) {
              if (mx.ui.getContentForm().url !== null) {
                var pageURL = window.location.origin + mx.ui.getContentForm().url;
              } else {
                var pageURL = window.location.origin;
              }

              var trimmedURL = function (fullURL) {
                var lastCharIndex = fullURL.lastIndexOf("/");
                var endString = fullURL.substring(lastCharIndex + 1, fullURL.length);

                if (isNaN(endString)) {
                  return fullURL; // the end of the string isn't a number, return the whole thing
                } else {
                  return fullPath.substr(0, lastCharIndex); // the end of the string is a number, trim it
                }
              }(pageURL);

              dataLayer += '"Page URL":"' + trimmedURL + '",';
            }

            if (props.sendSessionID) {
              dataLayer += '"Session ID":"' + mx.session.getSessionObjectId() + '",';
            }

            if (props.sendAdditionalProps) {
              for (const [propName, propValue] of Object.entries(props.additionalProps)) {
                dataLayer += '"' + propValue.propName + '":"' + propValue.propValue.value + '",';
              }
            }

            dataLayer = dataLayer.replace(/,\s*$/, ""); // remove the last comma

            dataLayer += "}";
            return JSON.parse(dataLayer);
          };

          let dataLayer = dataLayerStructure(props);
          const tagManagerArgs = {
            gtmId: props.measurementID,
            dataLayer
          };
          dist.initialize(tagManagerArgs);
        } //mx.previousLayout = mx.ui.getContentForm()._currentLayouts[0]; // set the previous layout after the page has loaded for the next comparison


        mx.ga4Connected = true; // Complete original actions

        origOnNavigation();
        return () => {
        };
      };
    }
  }, []);
  return null;
};

function GoogleTagManager({
  measurementID,
  sendCustomProps,
  pageViewEventName,
  sendPageTitle,
  sendModuleLocation,
  sendPageURL,
  sendSessionID,
  sendAdditionalProps,
  additionalProps
}) {
  return createElement(InitializeGTM, {
    measurementID: measurementID,
    sendCustomProps: sendCustomProps,
    pageViewEventName: pageViewEventName,
    sendPageTitle: sendPageTitle,
    sendModuleLocation: sendModuleLocation,
    sendPageURL: sendPageURL,
    sendSessionID: sendSessionID,
    sendAdditionalProps: sendAdditionalProps,
    additionalProps: additionalProps
  });
}

export { GoogleTagManager };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR29vZ2xlVGFnTWFuYWdlci5tanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1ndG0tbW9kdWxlL2Rpc3QvdXRpbHMvd2Fybi5qcyIsIi4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1ndG0tbW9kdWxlL2Rpc3QvU25pcHBldHMuanMiLCIuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZ3RtLW1vZHVsZS9kaXN0L1RhZ01hbmFnZXIuanMiLCIuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZ3RtLW1vZHVsZS9kaXN0L2luZGV4LmpzIiwiLi4vLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvSW5pdGlhbGl6ZUdUTS5qc3giLCIuLi8uLi8uLi8uLi8uLi9zcmMvR29vZ2xlVGFnTWFuYWdlci5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xudmFyIHdhcm4gPSBmdW5jdGlvbiB3YXJuKHMpIHtcbiAgY29uc29sZS53YXJuKCdbcmVhY3QtZ3RtXScsIHMpO1xufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gd2FybjsiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfd2FybiA9IHJlcXVpcmUoJy4vdXRpbHMvd2FybicpO1xuXG52YXIgX3dhcm4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2Fybik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8vIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3RhZy1tYW5hZ2VyL3F1aWNrc3RhcnRcblxudmFyIFNuaXBwZXRzID0ge1xuICB0YWdzOiBmdW5jdGlvbiB0YWdzKF9yZWYpIHtcbiAgICB2YXIgaWQgPSBfcmVmLmlkLFxuICAgICAgICBldmVudHMgPSBfcmVmLmV2ZW50cyxcbiAgICAgICAgZGF0YUxheWVyID0gX3JlZi5kYXRhTGF5ZXIsXG4gICAgICAgIGRhdGFMYXllck5hbWUgPSBfcmVmLmRhdGFMYXllck5hbWUsXG4gICAgICAgIHByZXZpZXcgPSBfcmVmLnByZXZpZXcsXG4gICAgICAgIGF1dGggPSBfcmVmLmF1dGg7XG5cbiAgICB2YXIgZ3RtX2F1dGggPSAnJmd0bV9hdXRoPScgKyBhdXRoO1xuICAgIHZhciBndG1fcHJldmlldyA9ICcmZ3RtX3ByZXZpZXc9JyArIHByZXZpZXc7XG5cbiAgICBpZiAoIWlkKSAoMCwgX3dhcm4yLmRlZmF1bHQpKCdHVE0gSWQgaXMgcmVxdWlyZWQnKTtcblxuICAgIHZhciBpZnJhbWUgPSAnXFxuICAgICAgPGlmcmFtZSBzcmM9XCJodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ucy5odG1sP2lkPScgKyBpZCArIGd0bV9hdXRoICsgZ3RtX3ByZXZpZXcgKyAnJmd0bV9jb29raWVzX3dpbj14XCJcXG4gICAgICAgIGhlaWdodD1cIjBcIiB3aWR0aD1cIjBcIiBzdHlsZT1cImRpc3BsYXk6bm9uZTt2aXNpYmlsaXR5OmhpZGRlblwiIGlkPVwidGFnLW1hbmFnZXJcIj48L2lmcmFtZT4nO1xuXG4gICAgdmFyIHNjcmlwdCA9ICdcXG4gICAgICAoZnVuY3Rpb24odyxkLHMsbCxpKXt3W2xdPXdbbF18fFtdO1xcbiAgICAgICAgd1tsXS5wdXNoKHtcXCdndG0uc3RhcnRcXCc6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLGV2ZW50OlxcJ2d0bS5qc1xcJywgJyArIEpTT04uc3RyaW5naWZ5KGV2ZW50cykuc2xpY2UoMSwgLTEpICsgJ30pO1xcbiAgICAgICAgdmFyIGY9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZShzKVswXSxqPWQuY3JlYXRlRWxlbWVudChzKSxkbD1sIT1cXCdkYXRhTGF5ZXJcXCc/XFwnJmw9XFwnK2w6XFwnXFwnO1xcbiAgICAgICAgai5hc3luYz10cnVlO2ouc3JjPVxcJ2h0dHBzOi8vd3d3Lmdvb2dsZXRhZ21hbmFnZXIuY29tL2d0bS5qcz9pZD1cXCcraStkbCtcXCcnICsgZ3RtX2F1dGggKyBndG1fcHJldmlldyArICcmZ3RtX2Nvb2tpZXNfd2luPXhcXCc7XFxuICAgICAgICBmLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGosZik7XFxuICAgICAgfSkod2luZG93LGRvY3VtZW50LFxcJ3NjcmlwdFxcJyxcXCcnICsgZGF0YUxheWVyTmFtZSArICdcXCcsXFwnJyArIGlkICsgJ1xcJyk7JztcblxuICAgIHZhciBkYXRhTGF5ZXJWYXIgPSB0aGlzLmRhdGFMYXllcihkYXRhTGF5ZXIsIGRhdGFMYXllck5hbWUpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlmcmFtZTogaWZyYW1lLFxuICAgICAgc2NyaXB0OiBzY3JpcHQsXG4gICAgICBkYXRhTGF5ZXJWYXI6IGRhdGFMYXllclZhclxuICAgIH07XG4gIH0sXG4gIGRhdGFMYXllcjogZnVuY3Rpb24gZGF0YUxheWVyKF9kYXRhTGF5ZXIsIGRhdGFMYXllck5hbWUpIHtcbiAgICByZXR1cm4gJ1xcbiAgICAgIHdpbmRvdy4nICsgZGF0YUxheWVyTmFtZSArICcgPSB3aW5kb3cuJyArIGRhdGFMYXllck5hbWUgKyAnIHx8IFtdO1xcbiAgICAgIHdpbmRvdy4nICsgZGF0YUxheWVyTmFtZSArICcucHVzaCgnICsgSlNPTi5zdHJpbmdpZnkoX2RhdGFMYXllcikgKyAnKSc7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU25pcHBldHM7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX1NuaXBwZXRzID0gcmVxdWlyZSgnLi9TbmlwcGV0cycpO1xuXG52YXIgX1NuaXBwZXRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1NuaXBwZXRzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIFRhZ01hbmFnZXIgPSB7XG4gIGRhdGFTY3JpcHQ6IGZ1bmN0aW9uIGRhdGFTY3JpcHQoZGF0YUxheWVyKSB7XG4gICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgIHNjcmlwdC5pbm5lckhUTUwgPSBkYXRhTGF5ZXI7XG4gICAgcmV0dXJuIHNjcmlwdDtcbiAgfSxcbiAgZ3RtOiBmdW5jdGlvbiBndG0oYXJncykge1xuICAgIHZhciBzbmlwcGV0cyA9IF9TbmlwcGV0czIuZGVmYXVsdC50YWdzKGFyZ3MpO1xuXG4gICAgdmFyIG5vU2NyaXB0ID0gZnVuY3Rpb24gbm9TY3JpcHQoKSB7XG4gICAgICB2YXIgbm9zY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdub3NjcmlwdCcpO1xuICAgICAgbm9zY3JpcHQuaW5uZXJIVE1MID0gc25pcHBldHMuaWZyYW1lO1xuICAgICAgcmV0dXJuIG5vc2NyaXB0O1xuICAgIH07XG5cbiAgICB2YXIgc2NyaXB0ID0gZnVuY3Rpb24gc2NyaXB0KCkge1xuICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgc2NyaXB0LmlubmVySFRNTCA9IHNuaXBwZXRzLnNjcmlwdDtcbiAgICAgIHJldHVybiBzY3JpcHQ7XG4gICAgfTtcblxuICAgIHZhciBkYXRhU2NyaXB0ID0gdGhpcy5kYXRhU2NyaXB0KHNuaXBwZXRzLmRhdGFMYXllclZhcik7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbm9TY3JpcHQ6IG5vU2NyaXB0LFxuICAgICAgc2NyaXB0OiBzY3JpcHQsXG4gICAgICBkYXRhU2NyaXB0OiBkYXRhU2NyaXB0XG4gICAgfTtcbiAgfSxcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShfcmVmKSB7XG4gICAgdmFyIGd0bUlkID0gX3JlZi5ndG1JZCxcbiAgICAgICAgX3JlZiRldmVudHMgPSBfcmVmLmV2ZW50cyxcbiAgICAgICAgZXZlbnRzID0gX3JlZiRldmVudHMgPT09IHVuZGVmaW5lZCA/IHt9IDogX3JlZiRldmVudHMsXG4gICAgICAgIGRhdGFMYXllciA9IF9yZWYuZGF0YUxheWVyLFxuICAgICAgICBfcmVmJGRhdGFMYXllck5hbWUgPSBfcmVmLmRhdGFMYXllck5hbWUsXG4gICAgICAgIGRhdGFMYXllck5hbWUgPSBfcmVmJGRhdGFMYXllck5hbWUgPT09IHVuZGVmaW5lZCA/ICdkYXRhTGF5ZXInIDogX3JlZiRkYXRhTGF5ZXJOYW1lLFxuICAgICAgICBfcmVmJGF1dGggPSBfcmVmLmF1dGgsXG4gICAgICAgIGF1dGggPSBfcmVmJGF1dGggPT09IHVuZGVmaW5lZCA/ICcnIDogX3JlZiRhdXRoLFxuICAgICAgICBfcmVmJHByZXZpZXcgPSBfcmVmLnByZXZpZXcsXG4gICAgICAgIHByZXZpZXcgPSBfcmVmJHByZXZpZXcgPT09IHVuZGVmaW5lZCA/ICcnIDogX3JlZiRwcmV2aWV3O1xuXG4gICAgdmFyIGd0bSA9IHRoaXMuZ3RtKHtcbiAgICAgIGlkOiBndG1JZCxcbiAgICAgIGV2ZW50czogZXZlbnRzLFxuICAgICAgZGF0YUxheWVyOiBkYXRhTGF5ZXIgfHwgdW5kZWZpbmVkLFxuICAgICAgZGF0YUxheWVyTmFtZTogZGF0YUxheWVyTmFtZSxcbiAgICAgIGF1dGg6IGF1dGgsXG4gICAgICBwcmV2aWV3OiBwcmV2aWV3XG4gICAgfSk7XG4gICAgaWYgKGRhdGFMYXllcikgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChndG0uZGF0YVNjcmlwdCk7XG4gICAgZG9jdW1lbnQuaGVhZC5pbnNlcnRCZWZvcmUoZ3RtLnNjcmlwdCgpLCBkb2N1bWVudC5oZWFkLmNoaWxkTm9kZXNbMF0pO1xuICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKGd0bS5ub1NjcmlwdCgpLCBkb2N1bWVudC5ib2R5LmNoaWxkTm9kZXNbMF0pO1xuICB9LFxuICBkYXRhTGF5ZXI6IGZ1bmN0aW9uIGRhdGFMYXllcihfcmVmMikge1xuICAgIHZhciBfZGF0YUxheWVyID0gX3JlZjIuZGF0YUxheWVyLFxuICAgICAgICBfcmVmMiRkYXRhTGF5ZXJOYW1lID0gX3JlZjIuZGF0YUxheWVyTmFtZSxcbiAgICAgICAgZGF0YUxheWVyTmFtZSA9IF9yZWYyJGRhdGFMYXllck5hbWUgPT09IHVuZGVmaW5lZCA/ICdkYXRhTGF5ZXInIDogX3JlZjIkZGF0YUxheWVyTmFtZTtcblxuICAgIGlmICh3aW5kb3dbZGF0YUxheWVyTmFtZV0pIHJldHVybiB3aW5kb3dbZGF0YUxheWVyTmFtZV0ucHVzaChfZGF0YUxheWVyKTtcbiAgICB2YXIgc25pcHBldHMgPSBfU25pcHBldHMyLmRlZmF1bHQuZGF0YUxheWVyKF9kYXRhTGF5ZXIsIGRhdGFMYXllck5hbWUpO1xuICAgIHZhciBkYXRhU2NyaXB0ID0gdGhpcy5kYXRhU2NyaXB0KHNuaXBwZXRzKTtcbiAgICBkb2N1bWVudC5oZWFkLmluc2VydEJlZm9yZShkYXRhU2NyaXB0LCBkb2N1bWVudC5oZWFkLmNoaWxkTm9kZXNbMF0pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRhZ01hbmFnZXI7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX1RhZ01hbmFnZXIgPSByZXF1aXJlKCcuL1RhZ01hbmFnZXInKTtcblxudmFyIF9UYWdNYW5hZ2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1RhZ01hbmFnZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9UYWdNYW5hZ2VyMi5kZWZhdWx0OyIsImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgVGFnTWFuYWdlciBmcm9tICdyZWFjdC1ndG0tbW9kdWxlJ1xyXG5cclxuY29uc3QgSW5pdGlhbGl6ZUdUTSA9ICggcHJvcHMgKSA9PiB7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcblxyXG4gICAgaWYgKCFteC5nYTRDb25uZWN0ZWQpIHsgLy8gd2UgbmVlZCB0aGUgZmxhZyBiZWNhdXNlIG9uTmF2aWdhdGlvbiBpcyBjYWxsZWQgc2V2ZXJhbCB0aW1lcyBmb3IgdGhpbmdzIGxpa2UgYWZ0ZXIgd2lkZ2V0IGxvYWQsIGFmdGVyIHNob3cgcGFnZSwgZXRjLiBJZiB3ZSByZW1vdmUgdGhlIGZsYWcsIHRoZW4gd2Ugc2VuZCBtb3JlIHRoYW4gb25lIHBhZ2UgaGl0IHBlciBwYWdlIHZpZXdpbmdcclxuICAgICAgY29uc3Qgb3JpZ09uTmF2aWdhdGlvbiA9IG14LnVpLmdldENvbnRlbnRGb3JtKCkub25OYXZpZ2F0aW9uOyAvLyBjYWNoZSB3aGF0IHRoZSBvcmlnaW5hbCBmdW5jdGlvbiBkaWRcclxuICAgICAgbXgudWkuZ2V0Q29udGVudEZvcm0oKS5vbk5hdmlnYXRpb24gPSAoKSA9PiB7XHJcbiAgICAgICAgLy8gQ29tcGxldGUgY3VzdG9tIGFjdGlvbnNcclxuICAgICAgICBkZWJ1Z2dlcjtcclxuICAgICAgICBpZiAocHJvcHMuc2VuZEN1c3RvbVByb3BzID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgLy8gb25OYXZpZ2F0aW9uLCBmbGFnIGdvZXMgaW4gbXguPHNvbWV0aGluZz5cclxuICAgICAgICAgIGNvbnN0IHRhZ01hbmFnZXJBcmdzSW5pdGlhbGl6ZSA9IHtcclxuICAgICAgICAgICAgZ3RtSWQ6IHByb3BzLm1lYXN1cmVtZW50SURcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBUYWdNYW5hZ2VyLmluaXRpYWxpemUodGFnTWFuYWdlckFyZ3NJbml0aWFsaXplKVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIC8vXHJcblxyXG4gICAgICAgICAgbGV0IGRhdGFMYXllclN0cnVjdHVyZSA9IGZ1bmN0aW9uKHByb3BzKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhTGF5ZXIgPSAne1wiZXZlbnRcIjpcIicgKyBwcm9wcy5wYWdlVmlld0V2ZW50TmFtZSArICdcIiwnO1xyXG5cclxuICAgICAgICAgICAgaWYgKHByb3BzLnNlbmRQYWdlVGl0bGUpIHtcclxuICAgICAgICAgICAgICBkYXRhTGF5ZXIgKz0gJ1wiUGFnZSBOYW1lXCI6XCInICsgbXgudWkuZ2V0Q29udGVudEZvcm0oKS50aXRsZSArICdcIiwnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocHJvcHMuc2VuZE1vZHVsZUxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgdmFyIG1vZHVsZVBhdGggPSBteC51aS5nZXRDb250ZW50Rm9ybSgpLnBhdGg7XHJcbiAgICAgICAgICAgICAgdmFyIG1vZHVsZUxvY2F0aW9uID0gKGZ1bmN0aW9uKG1vZHVsZVBhdGgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYWdlRXh0ZW5zaW9uID0gXCIucGFnZS54bWxcIjtcclxuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gbW9kdWxlUGF0aC5zdWJzdHIoMCwgbW9kdWxlUGF0aC5sZW5ndGggLSBwYWdlRXh0ZW5zaW9uLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGF0aDtcclxuICAgICAgICAgICAgICB9KG1vZHVsZVBhdGgpKTtcclxuICAgICAgICAgICAgICBkYXRhTGF5ZXIgKz0gJ1wiTW9kdWxlIExvY2F0aW9uXCI6XCInICsgbW9kdWxlTG9jYXRpb24gKyAnXCIsJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHByb3BzLnNlbmRQYWdlVVJMKSB7XHJcbiAgICAgICAgICAgICAgaWYgKG14LnVpLmdldENvbnRlbnRGb3JtKCkudXJsICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFnZVVSTCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyBteC51aS5nZXRDb250ZW50Rm9ybSgpLnVybDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFnZVVSTCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICB2YXIgdHJpbW1lZFVSTCA9IChmdW5jdGlvbihmdWxsVVJMKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGFzdENoYXJJbmRleCA9IGZ1bGxVUkwubGFzdEluZGV4T2YoXCIvXCIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZFN0cmluZyA9IGZ1bGxVUkwuc3Vic3RyaW5nKGxhc3RDaGFySW5kZXggKyAxLGZ1bGxVUkwubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIGlmIChpc05hTihlbmRTdHJpbmcpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmdWxsVVJMOyAvLyB0aGUgZW5kIG9mIHRoZSBzdHJpbmcgaXNuJ3QgYSBudW1iZXIsIHJldHVybiB0aGUgd2hvbGUgdGhpbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZnVsbFBhdGguc3Vic3RyKDAsbGFzdENoYXJJbmRleCk7IC8vIHRoZSBlbmQgb2YgdGhlIHN0cmluZyBpcyBhIG51bWJlciwgdHJpbSBpdFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0ocGFnZVVSTCkpO1xyXG4gICAgICAgICAgICAgIGRhdGFMYXllciArPSAnXCJQYWdlIFVSTFwiOlwiJyArIHRyaW1tZWRVUkwgKyAnXCIsJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHByb3BzLnNlbmRTZXNzaW9uSUQpIHtcclxuICAgICAgICAgICAgICBkYXRhTGF5ZXIgKz0gJ1wiU2Vzc2lvbiBJRFwiOlwiJyArIG14LnNlc3Npb24uZ2V0U2Vzc2lvbk9iamVjdElkKCkgKyAnXCIsJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHByb3BzLnNlbmRBZGRpdGlvbmFsUHJvcHMpIHtcclxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtwcm9wTmFtZSwgcHJvcFZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwcm9wcy5hZGRpdGlvbmFsUHJvcHMpKSB7XHJcbiAgICAgICAgICAgICAgZGF0YUxheWVyICs9ICdcIicgKyBwcm9wVmFsdWUucHJvcE5hbWUgKyAnXCI6XCInICsgcHJvcFZhbHVlLnByb3BWYWx1ZS52YWx1ZSArICdcIiwnO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZGF0YUxheWVyID0gZGF0YUxheWVyLnJlcGxhY2UoLyxcXHMqJC8sIFwiXCIpOyAvLyByZW1vdmUgdGhlIGxhc3QgY29tbWFcclxuICAgICAgICAgICAgZGF0YUxheWVyICs9IFwifVwiXHJcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGFMYXllcik7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgbGV0IGRhdGFMYXllciA9IGRhdGFMYXllclN0cnVjdHVyZShwcm9wcyk7XHJcblxyXG4gICAgICAgICAgY29uc3QgdGFnTWFuYWdlckFyZ3MgPSB7XHJcbiAgICAgICAgICAgIGd0bUlkOiBwcm9wcy5tZWFzdXJlbWVudElELFxyXG4gICAgICAgICAgICBkYXRhTGF5ZXJcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFRhZ01hbmFnZXIuaW5pdGlhbGl6ZSh0YWdNYW5hZ2VyQXJncylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vbXgucHJldmlvdXNMYXlvdXQgPSBteC51aS5nZXRDb250ZW50Rm9ybSgpLl9jdXJyZW50TGF5b3V0c1swXTsgLy8gc2V0IHRoZSBwcmV2aW91cyBsYXlvdXQgYWZ0ZXIgdGhlIHBhZ2UgaGFzIGxvYWRlZCBmb3IgdGhlIG5leHQgY29tcGFyaXNvblxyXG4gICAgICAgIG14LmdhNENvbm5lY3RlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIENvbXBsZXRlIG9yaWdpbmFsIGFjdGlvbnNcclxuICAgICAgICBvcmlnT25OYXZpZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICBudWxsO1xyXG4gICAgICAgIH0gXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCBbXSk7XHJcblxyXG4gIHJldHVybiBudWxsO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgSW5pdGlhbGl6ZUdUTSIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBJbml0aWFsaXplR1RNIGZyb20gXCIuL2NvbXBvbmVudHMvSW5pdGlhbGl6ZUdUTVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gR29vZ2xlVGFnTWFuYWdlcih7IG1lYXN1cmVtZW50SUQsIHNlbmRDdXN0b21Qcm9wcywgcGFnZVZpZXdFdmVudE5hbWUsIHNlbmRQYWdlVGl0bGUsIHNlbmRNb2R1bGVMb2NhdGlvbiwgc2VuZFBhZ2VVUkwsIHNlbmRTZXNzaW9uSUQsIHNlbmRBZGRpdGlvbmFsUHJvcHMsIGFkZGl0aW9uYWxQcm9wcyB9KSB7XG4gICAgcmV0dXJuIDxJbml0aWFsaXplR1RNIG1lYXN1cmVtZW50SUQ9e21lYXN1cmVtZW50SUR9IHNlbmRDdXN0b21Qcm9wcz17c2VuZEN1c3RvbVByb3BzfSBwYWdlVmlld0V2ZW50TmFtZT17cGFnZVZpZXdFdmVudE5hbWV9IHNlbmRQYWdlVGl0bGU9e3NlbmRQYWdlVGl0bGV9IHNlbmRNb2R1bGVMb2NhdGlvbj17c2VuZE1vZHVsZUxvY2F0aW9ufSBzZW5kUGFnZVVSTD17c2VuZFBhZ2VVUkx9IHNlbmRTZXNzaW9uSUQ9e3NlbmRTZXNzaW9uSUR9IHNlbmRBZGRpdGlvbmFsUHJvcHM9e3NlbmRBZGRpdGlvbmFsUHJvcHN9IGFkZGl0aW9uYWxQcm9wcz17YWRkaXRpb25hbFByb3BzfSAvPjtcbn1cbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIndhcm4iLCJzIiwiY29uc29sZSIsIl93YXJuIiwicmVxdWlyZSIsIl93YXJuMiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIlNuaXBwZXRzIiwidGFncyIsIl9yZWYiLCJpZCIsImV2ZW50cyIsImRhdGFMYXllciIsImRhdGFMYXllck5hbWUiLCJwcmV2aWV3IiwiYXV0aCIsImd0bV9hdXRoIiwiZ3RtX3ByZXZpZXciLCJpZnJhbWUiLCJzY3JpcHQiLCJKU09OIiwic3RyaW5naWZ5Iiwic2xpY2UiLCJkYXRhTGF5ZXJWYXIiLCJfZGF0YUxheWVyIiwibW9kdWxlIiwiX1NuaXBwZXRzIiwiX1NuaXBwZXRzMiIsIlRhZ01hbmFnZXIiLCJkYXRhU2NyaXB0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiZ3RtIiwiYXJncyIsInNuaXBwZXRzIiwibm9TY3JpcHQiLCJub3NjcmlwdCIsImluaXRpYWxpemUiLCJndG1JZCIsIl9yZWYkZXZlbnRzIiwidW5kZWZpbmVkIiwiX3JlZiRkYXRhTGF5ZXJOYW1lIiwiX3JlZiRhdXRoIiwiX3JlZiRwcmV2aWV3IiwiaGVhZCIsImFwcGVuZENoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiY2hpbGROb2RlcyIsImJvZHkiLCJfcmVmMiIsIl9yZWYyJGRhdGFMYXllck5hbWUiLCJ3aW5kb3ciLCJwdXNoIiwiX1RhZ01hbmFnZXIiLCJfVGFnTWFuYWdlcjIiLCJJbml0aWFsaXplR1RNIiwicHJvcHMiLCJ1c2VFZmZlY3QiLCJteCIsImdhNENvbm5lY3RlZCIsIm9yaWdPbk5hdmlnYXRpb24iLCJ1aSIsImdldENvbnRlbnRGb3JtIiwib25OYXZpZ2F0aW9uIiwic2VuZEN1c3RvbVByb3BzIiwidGFnTWFuYWdlckFyZ3NJbml0aWFsaXplIiwibWVhc3VyZW1lbnRJRCIsImRhdGFMYXllclN0cnVjdHVyZSIsInBhZ2VWaWV3RXZlbnROYW1lIiwic2VuZFBhZ2VUaXRsZSIsInRpdGxlIiwic2VuZE1vZHVsZUxvY2F0aW9uIiwibW9kdWxlUGF0aCIsInBhdGgiLCJtb2R1bGVMb2NhdGlvbiIsInBhZ2VFeHRlbnNpb24iLCJzdWJzdHIiLCJsZW5ndGgiLCJzZW5kUGFnZVVSTCIsInVybCIsInBhZ2VVUkwiLCJsb2NhdGlvbiIsIm9yaWdpbiIsInRyaW1tZWRVUkwiLCJmdWxsVVJMIiwibGFzdENoYXJJbmRleCIsImxhc3RJbmRleE9mIiwiZW5kU3RyaW5nIiwic3Vic3RyaW5nIiwiaXNOYU4iLCJmdWxsUGF0aCIsInNlbmRTZXNzaW9uSUQiLCJzZXNzaW9uIiwiZ2V0U2Vzc2lvbk9iamVjdElkIiwic2VuZEFkZGl0aW9uYWxQcm9wcyIsInByb3BOYW1lIiwicHJvcFZhbHVlIiwiZW50cmllcyIsImFkZGl0aW9uYWxQcm9wcyIsInJlcGxhY2UiLCJwYXJzZSIsInRhZ01hbmFnZXJBcmdzIiwiR29vZ2xlVGFnTWFuYWdlciJdLCJtYXBwaW5ncyI6Ijs7OztBQUVBQSxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE1BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0FBQzNDQyxFQUFBQSxLQUFLLEVBQUU7QUFEb0MsQ0FBN0M7O0FBR0EsSUFBSUMsSUFBSSxHQUFHLFNBQVNBLElBQVQsQ0FBY0MsQ0FBZCxFQUFpQjtBQUMxQkMsRUFBQUEsT0FBTyxDQUFDRixJQUFSLENBQWEsYUFBYixFQUE0QkMsQ0FBNUI7QUFDRCxDQUZEOztjQUlBLEdBQWtCRDs7QUNQbEIsSUFBSUcsS0FBSyxHQUFHQyxNQUFaOztBQUVBLElBQUlDLE1BQU0sR0FBR0Msd0JBQXNCLENBQUNILEtBQUQsQ0FBbkM7O0FBRUEsU0FBU0csd0JBQVQsQ0FBZ0NDLEdBQWhDLEVBQXFDO0FBQUUsU0FBT0EsR0FBRyxJQUFJ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

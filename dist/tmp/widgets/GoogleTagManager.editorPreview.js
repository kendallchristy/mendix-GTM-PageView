"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&Object.prototype.hasOwnProperty.call(e,"default")&&1===Object.keys(e).length?e.default:e}!function(e,t){void 0===t&&(t={});var a=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===a&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}("");var a=t(Object.freeze({__proto__:null,default:"",stylesheet:""})),n={};Object.defineProperty(n,"__esModule",{value:!0});n.default=function(e){console.warn("[react-gtm]",e)};var r,i=(r=n)&&r.__esModule?r:{default:r};var o=function(e){return e&&e.__esModule?e:{default:e}}({tags:function(e){var t=e.id,a=e.events,n=e.dataLayer,r=e.dataLayerName,o=e.preview,d="&gtm_auth="+e.auth,s="&gtm_preview="+o;return t||(0,i.default)("GTM Id is required"),{iframe:'\n      <iframe src="https://www.googletagmanager.com/ns.html?id='+t+d+s+'&gtm_cookies_win=x"\n        height="0" width="0" style="display:none;visibility:hidden" id="tag-manager"></iframe>',script:"\n      (function(w,d,s,l,i){w[l]=w[l]||[];\n        w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js', "+JSON.stringify(a).slice(1,-1)+"});\n        var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';\n        j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl+'"+d+s+"&gtm_cookies_win=x';\n        f.parentNode.insertBefore(j,f);\n      })(window,document,'script','"+r+"','"+t+"');",dataLayerVar:this.dataLayer(n,r)}},dataLayer:function(e,t){return"\n      window."+t+" = window."+t+" || [];\n      window."+t+".push("+JSON.stringify(e)+")"}});var d=function(e){return e&&e.__esModule?e:{default:e}}({dataScript:function(e){var t=document.createElement("script");return t.innerHTML=e,t},gtm:function(e){var t=o.default.tags(e);return{noScript:function(){var e=document.createElement("noscript");return e.innerHTML=t.iframe,e},script:function(){var e=document.createElement("script");return e.innerHTML=t.script,e},dataScript:this.dataScript(t.dataLayerVar)}},initialize:function(e){var t=e.gtmId,a=e.events,n=void 0===a?{}:a,r=e.dataLayer,i=e.dataLayerName,o=void 0===i?"dataLayer":i,d=e.auth,s=void 0===d?"":d,u=e.preview,l=void 0===u?"":u,c=this.gtm({id:t,events:n,dataLayer:r||void 0,dataLayerName:o,auth:s,preview:l});r&&document.head.appendChild(c.dataScript),document.head.insertBefore(c.script(),document.head.childNodes[0]),document.body.insertBefore(c.noScript(),document.body.childNodes[0])},dataLayer:function(e){var t=e.dataLayer,a=e.dataLayerName,n=void 0===a?"dataLayer":a;if(window[n])return window[n].push(t);var r=o.default.dataLayer(t,n),i=this.dataScript(r);document.head.insertBefore(i,document.head.childNodes[0])}});var s=d.default;const u=t=>(e.useEffect((()=>{if(!mx.ga4Connected){let e=!1;for(const a of t.additionalProps)"available"!==a.propDataSource.status&&(e=!0);if(!e){const e=mx.ui.getContentForm().onNavigation;mx.ui.getContentForm().onNavigation=()=>{if(!1===t.sendCustomProps){const e={gtmId:t.measurementID};s.initialize(e)}else{const e=()=>{var e,a,n,r,i='{"event":"'+t.pageViewEventName+'",';if(t.sendPageTitle&&(i+='"Page Name":"'+mx.ui.getContentForm().title+'",'),t.sendModuleLocation){var o=mx.ui.getContentForm().path;i+='"Module Location":"'+((e=o).substr(0,e.length-".page.xml".length)+'",')}if(t.sendPageURL){var d;d=null!==mx.ui.getContentForm().url?window.location.origin+mx.ui.getContentForm().url:window.location.origin;i+='"Page URL":"'+(n=(a=d).lastIndexOf("/"),r=a.substring(n+1,a.length),(isNaN(r)?a:a.substr(0,n))+'",')}if(t.sendSessionID&&(i+='"Session ID":"'+mx.session.getSessionObjectId()+'",'),t.sendAdditionalProps){let e="";for(const a of t.additionalProps){for(const t of a.propDataSource.items)e+=a.propValue.get(t).value+", ";e=e.replace(/,\s*$/,""),i+='"'+a.propName+'":"'+e+'",',e=""}}return i=i.replace(/,\s*$/,""),i+="}",JSON.parse(i)},a=e(),n={gtmId:t.measurementID,dataLayer:a};s.initialize(n)}return mx.ga4Connected=!0,e(),null}}}})),null);exports.GoogleTagManager=function(t){let{measurementID:a,sendCustomProps:n,pageViewEventName:r,sendPageTitle:i,sendModuleLocation:o,sendPageURL:d,sendSessionID:s,sendAdditionalProps:l,additionalProps:c}=t;return e.createElement(u,{measurementID:a,sendCustomProps:n,pageViewEventName:r,sendPageTitle:i,sendModuleLocation:o,sendPageURL:d,sendSessionID:s,sendAdditionalProps:l,additionalProps:c})},exports.getPreviewCss=function(){return a};
